---
title: 操作系统概述
date: 2022-04-08 22:11:31
tags: 
- 操作系统
- Review
category: 基础
---
## 操作系统的特征
1. 并发：指两个或多个事件在同一时间间隔内发生。
2. 共享：资源共享，指系统中的资源可供内存中多个并发执行的进程共同使用。
   1. 互斥型共享：资源在同一时刻只允许一个进程使用
   2. 同时访问共享：资源可以在同一时刻由多个进程访问
3. 虚拟：指吧一个物理上的实体编程若干个逻辑上的对应物
4. 异步：进程的执行以不可预知的速度推进，在不同的时刻仅有一个进程占有处理机。

## 操作系统的目标和功能
操作系统的主要功能有：
- 处理机管理
- 存储器管理
- 设备管理
- 文件管理
操作系统对用户提供命令接口，让用户可以方便、快捷地操作计算机。接口有：
- 命令接口：可分为联机命令接口和脱机命令接口
  - 联机命令接口：交互式命令接口，即Shell
  - 脱机命令接口：批处理命令接口，即批处理脚本
- 程序接口：由一组系统调用组成

## 操作系统地发展和分类
### 手工处理阶段
此时没有真正意义上的操作系统，所有硬件都由用户自行管理。
### 批处理阶段
批处理系统可分为单道批处理系统和多道批处理系统。
#### 单道批处理系统
系统对作业的处理是成批进行的，但内存中始终只保存一道作业。每当程序在进行IO操作时，CPU将会进行等待。
#### 多道批处理系统
内存中不再只保存一道作业，而是可以允许多个程序同时进入内存，并在当前程序因为IO操作等原因陷入阻塞时，CPU将会转而执行其它程序。
### 分时操作系统
分时技术指将处理器的运行时间分为很短的时间片，按照时间片将处理器分配给各个作业使用。  
分时操作系统则是使用了分时技术，让多个用户可以通过终端共享同一台主机，由于计算机切换进程的时间极短，每个用户都能获得接近独占机器的体验。
### 实时操作系统
适合需要快速响应作业的场景，可以分为硬实时系统和软实时系统。  
硬实时系统将会绝对地在规定时间内执行任务，软实时系统可以偶尔违反时间规定。

## 操作系统的运行环境
### 操作系统的运行机制

#### 时钟管理
操作系统通过时钟管理向用户提供标准的系统时间，同时通过时钟中断完成进程的切换。

#### 中断机制
系统内核中用于管理设备、事件、调度等操作的机制。

#### 原语
- 是操作系统中完成一个规定操作的小程序
- 处于操作系统的最底层，是最接近硬件的部分
- 程序的运行具有原子性，也就是说其执行不能被打断
- 程序的运行时间短，且调用频繁

#### 系统控制的数据结构及处理
1. 进程管理，使用进程控制块(PCB)
2. 存储器管理
3. 设备管理

### 中断和异常
#### 中断
中断又称外中断，指来自CPU之外的事件的发生，如设备发出的IO中断或时钟发出的时钟中断。
#### 异常
异常也称内中断、例外或者陷入(trap)，指CPU内部发生的如程序非法操作、地址越界、算术溢出、虚存系统缺页以及陷入指令所引发的事件。异常无法被屏蔽，且处理异常依赖于当前运行程序。GBD的Debug就是依赖trap指令实现的调试功能。
#### 中断处理的过程
1. 关中断
2. 保存断点
3. 中断服务程序寻址
4. 保护现场和屏蔽字
5. 开中断
6. 执行中断服务程序
7. 关中断
8. 恢复现场和屏蔽字
9. 开中断、中断返回

### 系统调用
系统调用的发生需要操作系统完成从用户态到内核态的转换，同时系统调用的函数使用的堆栈也将从用户堆栈切换到系统堆栈。  
用户可以通过trap指令来发起系统调用，trap指令又称为陷入指令或访管指令。访管指令是在用户态执行的，所以并非是特权指令。

